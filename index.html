<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>FraudGuard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="icon" href="favicon.ico">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">

  <style>
    :root {
      --bg: #0b0f14;
      --panel: #111823;
      --text: #eaf2ff;
      --muted: #9bb0c7;
      --brand: #4ef2c2;
      --bad: #ff5b6e;
      --warn: #ffd166;
      --ok: #4ef2c2;
      --radius: 18px;
      --ease: cubic-bezier(.2,.9,.2,1);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: radial-gradient(900px 500px at 20% 10%, rgba(78,242,194,.12), transparent 60%), var(--bg);
      color: var(--text);
    }

    header {
      position: sticky;
      top: 0;
      backdrop-filter: blur(12px);
      background: rgba(11,15,20,.7);
      border-bottom: 1px solid rgba(255,255,255,.08);
      z-index: 50;
    }

    .nav {
      max-width: 1100px;
      margin: auto;
      padding: 14px 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      color: inherit;
    }

    .brand img {
      width: 34px;
      height: 34px;
      border-radius: 10px;
    }

    .brandName { font-weight: 900; }

    .pill {
      font-size: 12px;
      padding: 4px 10px;
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 999px;
      color: var(--muted);
    }

    .navRight {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .select {
      display: flex;
      align-items: center;
      gap: 6px;
      border: 1px solid rgba(255,255,255,.12);
      padding: 6px 10px;
      border-radius: 14px;
      background: rgba(255,255,255,.04);
    }

    .select select {
      background: transparent;
      border: 0;
      color: var(--text);
      outline: none;
      cursor: pointer;
    }

    .btn {
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color: var(--text);
      padding: 10px 14px;
      border-radius: 16px;
      cursor: pointer;
      transition: transform .2s var(--ease), border-color .2s var(--ease);
    }

    .btn:hover {
      transform: translateY(-1px);
      border-color: rgba(78,242,194,.5);
    }

    .btnPrimary {
      background: linear-gradient(135deg, rgba(78,242,194,.18), rgba(106,168,255,.12));
      border-color: rgba(78,242,194,.45);
    }

    main {
      max-width: 1100px;
      margin: auto;
      padding: 20px 16px 60px;
    }

    .hero {
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 22px;
      padding: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,.4);
    }

    h1 {
      margin: 10px 0 0;
      font-size: 34px;
      line-height: 1.1;
    }

    .lead {
      color: var(--muted);
      margin-top: 10px;
      max-width: 60ch;
    }

    .scan {
      display: flex;
      gap: 10px;
      margin-top: 16px;
    }

    .scan input {
      flex: 1;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(10,14,20,.6);
      color: var(--text);
      padding: 12px 14px;
      outline: none;
    }

    .scan input:focus {
      border-color: rgba(78,242,194,.6);
    }

    .result {
      margin-top: 18px;
      border-top: 1px solid rgba(255,255,255,.08);
      padding-top: 16px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: var(--muted);
      font-size: 13px;
    }

    .badge i {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--warn);
    }

    .badge.low i { background: var(--ok); }
    .badge.medium i { background: var(--warn); }
    .badge.high i { background: var(--bad); }

    .reasons {
      margin-top: 12px;
      display: grid;
      gap: 10px;
    }

    .reason {
      background: rgba(255,255,255,.03);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 16px;
      padding: 12px;
      color: var(--muted);
      font-size: 14px;
    }

    footer {
      margin-top: 30px;
      color: var(--muted);
      font-size: 12px;
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    .toastWrap {
      position: fixed;
      right: 16px;
      bottom: 16px;
      display: grid;
      gap: 10px;
      z-index: 100;
    }

    .toast {
      background: rgba(20,26,36,.9);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 16px;
      padding: 12px 14px;
      color: var(--text);
      box-shadow: 0 18px 60px rgba(0,0,0,.5);
      animation: toastIn .35s var(--ease) forwards;
    }

    @keyframes toastIn {
      from { transform: translateY(10px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
  </style>
</head>

<body>

<header>
  <div class="nav">
    <a class="brand" href="#">
      <img src="apple-touch-icon.png">
      <div>
        <div class="brandName">FraudGuard</div>
        <div class="pill" id="navPill">Анти-скам проверка</div>
      </div>
    </a>

    <div class="navRight">
      <div class="select">
        <span id="langLabel">Язык</span>
        <select id="langSelect">
          <option value="ru">RU</option>
          <option value="en">EN</option>
        </select>
      </div>

      <button class="btn btnPrimary" id="scanBtnTop">Проверить</button>
    </div>
  </div>
</header>

<main>
  <section class="hero">
    <div class="tag" id="heroTag">Безопасность сделок за 10 секунд</div>
    <h1 id="heroTitle">Проверь ссылку, аккаунт или кошелёк — до того как отправишь деньги</h1>
    <p class="lead" id="heroLead">
      FraudGuard показывает риск и объясняет, что именно выглядит подозрительно.
    </p>

    <div class="scan">
      <input id="scanInput" placeholder="Вставь ссылку / ник / адрес кошелька…">
      <button class="btn btnPrimary" id="scanBtn">Проверить</button>
    </div>

    <div class="result">
      <b id="resultTitle">Результат проверки</b>
      <div style="margin-top:8px">
        <span class="badge medium" id="riskBadge">
          <i></i>
          <span id="riskText">Ожидание ввода</span>
        </span>
      </div>

      <div class="reasons" id="reasons"></div>
    </div>
  </section>

  <footer>
    <span id="footerLeft"></span>
    <span id="footerRight"></span>
  </footer>
</main>

<div class="toastWrap" id="toasts"></div>

<script>
  const WORKER_URL = "https://fraudguard-app.guideyeahofc.workers.dev";

  const state = {
    lang: "ru"
  };

  const I18N = {
    ru: {
      navPill: "Анти-скам проверка",
      langLabel: "Язык",
      heroTag: "Безопасность сделок за 10 секунд",
      heroTitle: "Проверь ссылку, аккаунт или кошелёк — до того как отправишь деньги",
      heroLead: "FraudGuard показывает риск и объясняет, что именно выглядит подозрительно.",
      scanPlaceholder: "Вставь ссылку / ник / адрес кошелька…",
      scanBtn: "Проверить",
      resultTitle: "Результат проверки",
      riskWaiting: "Ожидание ввода",
      footerLeft: "© {year} FraudGuard. Сделано для безопасности.",
      footerRight: "Совет: если сомневаешься — не плати.",
      toastNoInput: "Нечего проверять",
      toastNoInputSub: "Сначала вставь ссылку/ник/кошелёк.",
      toastError: "Ошибка анализа",
      toastErrorSub: "Не удалось связаться с сервером."
    },
    en: {
      navPill: "Anti-scam checker",
      langLabel: "Language",
      heroTag: "Deal safety in 10 seconds",
      heroTitle: "Check a link, account, or wallet — before you pay",
      heroLead: "FraudGuard shows risk and explains what looks suspicious.",
      scanPlaceholder: "Paste link / username / wallet…",
      scanBtn: "Check",
      resultTitle: "Check result",
      riskWaiting: "Waiting for input",
      footerLeft: "© {year} FraudGuard. Built for safety.",
      footerRight: "Tip: if you’re unsure — don’t pay.",
      toastNoInput: "Nothing to check",
      toastNoInputSub: "Paste a link/username/wallet first.",
      toastError: "Analysis error",
      toastErrorSub: "Could not reach server."
    }
  };

  function t(key, vars = {}) {
    let s = I18N[state.lang][key] || key;
    for (const k in vars) {
      s = s.replaceAll(`{${k}}`, vars[k]);
    }
    return s;
  }

  function applyLang() {
    document.getElementById("navPill").textContent = t("navPill");
    document.getElementById("langLabel").textContent = t("langLabel");
    document.getElementById("heroTag").textContent = t("heroTag");
    document.getElementById("heroTitle").textContent = t("heroTitle");
    document.getElementById("heroLead").textContent = t("heroLead");
    document.getElementById("scanInput").placeholder = t("scanPlaceholder");
    document.getElementById("scanBtn").textContent = t("scanBtn");
    document.getElementById("scanBtnTop").textContent = t("scanBtn");
    document.getElementById("resultTitle").textContent = t("resultTitle");
    document.getElementById("riskText").textContent = t("riskWaiting");
    document.getElementById("footerLeft").textContent =
      t("footerLeft", { year: new Date().getFullYear() });
    document.getElementById("footerRight").textContent = t("footerRight");
  }

  document.getElementById("langSelect").addEventListener("change", e => {
    state.lang = e.target.value;
    localStorage.setItem("lang", state.lang);
    applyLang();
  });

  state.lang = localStorage.getItem("lang") || "ru";
  document.getElementById("langSelect").value = state.lang;
  applyLang();

  function showToast(title, sub) {
    const wrap = document.getElementById("toasts");
    const el = document.createElement("div");
    el.className = "toast";
    el.innerHTML = `<b>${title}</b><div style="color:#9bb0c7;font-size:13px;margin-top:4px">${sub}</div>`;
    wrap.appendChild(el);
    setTimeout(() => el.remove(), 3200);
  }

  async function analyzeText(text) {
    const res = await fetch(WORKER_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ text })
    });

    if (!res.ok) throw new Error("HTTP " + res.status);

    const data = await res.json();
    if (!data.ok) throw new Error(data.error || "Worker error");

    return data;
  }

  async function runAnalysis() {
    const input = document.getElementById("scanInput");
    const text = input.value.trim();

    if (!text) {
      showToast(t("toastNoInput"), t("toastNoInputSub"));
      return;
    }

    const reasonsEl = document.getElementById("reasons");
    reasonsEl.innerHTML = "";
    document.getElementById("riskText").textContent = "…";

    try {
      const data = await analyzeText(text);

      const badge = document.getElementById("riskBadge");
      badge.className = "badge " + data.risk;

      document.getElementById("riskText").textContent =
        data.risk === "high" ? "Высокий риск" :
        data.risk === "medium" ? "Средний риск" :
        "Низкий риск";

      data.reasons.forEach(r => {
        const div = document.createElement("div");
        div.className = "reason";
        div.textContent = r;
        reasonsEl.appendChild(div);
      });

    } catch (e) {
      console.error(e);
      showToast(t("toastError"), t("toastErrorSub"));
      document.getElementById("riskText").textContent = t("riskWaiting");
    }
  }

  document.getElementById("scanBtn").addEventListener("click", runAnalysis);
  document.getElementById("scanBtnTop").addEventListener("click", runAnalysis);
</script>

</body>
</html>
